{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Container,Table,Spinner,Alert,Button}from'react-bootstrap';import enrollmentService from'../services/enrollmentService';import courseService from'../services/courseService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CourseEnrollment=()=>{const[loading,setLoading]=useState(true);const[enrollments,setEnrollments]=useState([]);const[error,setError]=useState('');useEffect(()=>{const fetchAllEnrollments=async()=>{try{const courses=await courseService.getCourses();let allEnrollments=[];for(let course of courses){const data=await enrollmentService.getEnrollmentsByCourse(course.id);allEnrollments=[...allEnrollments,...data];}setEnrollments(allEnrollments);}catch(err){console.error(err);setError('Failed to load enrollments.');}finally{setLoading(false);}};fetchAllEnrollments();},[]);if(loading)return/*#__PURE__*/_jsx(Container,{className:\"mt-5 text-center\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})});return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Enrollment Reports\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Student\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Course\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Grade\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Score\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:enrollments.map(enr=>{var _enr$student,_enr$course;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:enr.id}),/*#__PURE__*/_jsx(\"td\",{children:((_enr$student=enr.student)===null||_enr$student===void 0?void 0:_enr$student.username)||enr.studentId}),/*#__PURE__*/_jsx(\"td\",{children:((_enr$course=enr.course)===null||_enr$course===void 0?void 0:_enr$course.title)||enr.courseId}),/*#__PURE__*/_jsx(\"td\",{children:enr.grade||'-'}),/*#__PURE__*/_jsx(\"td\",{children:enr.score||'-'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",size:\"sm\",onClick:async()=>{await enrollmentService.removeEnrollment(enr.id);setEnrollments(enrollments.filter(e=>e.id!==enr.id));},children:\"Remove\"})})]},enr.id);})})]})]});};export default CourseEnrollment;","map":{"version":3,"names":["React","useEffect","useState","Container","Table","Spinner","Alert","Button","enrollmentService","courseService","jsx","_jsx","jsxs","_jsxs","CourseEnrollment","loading","setLoading","enrollments","setEnrollments","error","setError","fetchAllEnrollments","courses","getCourses","allEnrollments","course","data","getEnrollmentsByCourse","id","err","console","className","children","animation","variant","striped","bordered","hover","map","enr","_enr$student","_enr$course","student","username","studentId","title","courseId","grade","score","size","onClick","removeEnrollment","filter","e"],"sources":["/Users/ayishailyas/Documents/GitHub/Course-Management-System/frontend/src/pages/CourseEnrollment.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Container, Table, Spinner, Alert, Button } from 'react-bootstrap';\nimport enrollmentService from '../services/enrollmentService';\nimport courseService from '../services/courseService';\n\nconst CourseEnrollment = () => {\n  const [loading, setLoading] = useState(true);\n  const [enrollments, setEnrollments] = useState([]);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchAllEnrollments = async () => {\n      try {\n        const courses = await courseService.getCourses();\n        let allEnrollments = [];\n        for (let course of courses) {\n          const data = await enrollmentService.getEnrollmentsByCourse(course.id);\n          allEnrollments = [...allEnrollments, ...data];\n        }\n        setEnrollments(allEnrollments);\n      } catch (err) {\n        console.error(err);\n        setError('Failed to load enrollments.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchAllEnrollments();\n  }, []);\n\n  if (loading) return <Container className=\"mt-5 text-center\"><Spinner animation=\"border\" /></Container>;\n\n  return (\n    <Container>\n      <h2>Enrollment Reports</h2>\n      {error && <Alert variant=\"danger\">{error}</Alert>}\n      <Table striped bordered hover>\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>Student</th>\n            <th>Course</th>\n            <th>Grade</th>\n            <th>Score</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {enrollments.map((enr) => (\n            <tr key={enr.id}>\n              <td>{enr.id}</td>\n              <td>{enr.student?.username || enr.studentId}</td>\n              <td>{enr.course?.title || enr.courseId}</td>\n              <td>{enr.grade || '-'}</td>\n              <td>{enr.score || '-'}</td>\n              <td>\n                <Button\n                  variant=\"danger\"\n                  size=\"sm\"\n                  onClick={async () => {\n                    await enrollmentService.removeEnrollment(enr.id);\n                    setEnrollments(enrollments.filter(e => e.id !== enr.id));\n                  }}\n                >\n                  Remove\n                </Button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n    </Container>\n  );\n};\n\nexport default CourseEnrollment;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}